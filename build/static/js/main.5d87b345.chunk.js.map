{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","services/peep.js","App.js","index.js"],"names":["Filter","filter","toFilterChange","value","onChange","PersonForm","submit","newName","nameChange","newNumber","numberChange","onSubmit","type","Person","persons","newFilter","del","person","name","toLowerCase","includes","map","key","number","onClick","baseUrl","axios","get","then","response","data","newPeep","post","id","put","delete","Message","msg","className","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","msgAlert","setMsgAlert","useEffect","console","log","peep","length","axiosDelPeep","event","target","preventDefault","samePeep","forEach","item","win","window","confirm","personName","concat","setTimeout","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5d87b345.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({filter, toFilterChange}) => { \n\n    return (\n        <input value={filter} onChange={toFilterChange}/>\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = ({submit, newName, nameChange, newNumber, numberChange}) => {\n\n    return (\n        <form onSubmit={submit}>\n            <div>\n                name: <input value={newName} onChange={nameChange}/>\n                <br />\n                number: <input value={newNumber} onChange={numberChange}/>\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from 'react';\n\nconst Person = ({persons, newFilter, del }) => {\n//const peeps = [...persons]\n\n    const toFilter = (person) => person.name.toLowerCase().includes(newFilter.toLowerCase()) === true;\n\n    return (\n        <>\n            {persons.filter(toFilter)\n            .map(person =>\n                <div key={person.name}>\n                    <p>{person.name} {person.number} <button onClick={del} value={person.name}>delete</button></p>\n                    \n                </div> \n            )}\n        </>\n    )\n}\n\nexport default Person","import axios from 'axios';\n\nconst baseUrl = '/api/persons'\n\nconst getPeep = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst addPeep = newPeep => {\n    const request = axios.post(baseUrl, newPeep)\n    return request.then(response => response.data)\n}\n\nconst updatePeep = (newPeep, id) => {\n    const request = axios.put(`${baseUrl}/${id}`, newPeep)\n    return request.then(response => response.data)\n}\n\nconst deletePeep = (id) => {\n    axios.delete(`${baseUrl}/${id}`)\n\n}\n\nexport default { \n    getPeep: getPeep, \n    addPeep: addPeep, \n    updatePeep: updatePeep,\n    deletePeep: deletePeep\n}","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Person from './components/Person';\nimport peep from './services/peep';\nimport './index.css';\n\nconst Message = ({msg}) => {\n  if (msg === null) {\n      return null\n    }\n  \n\n  return (\n      <div className='success'>\n          <p>{msg}</p>\n      </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ msgAlert, setMsgAlert ] = useState(null)\n\n  useEffect(() => {\n      console.log('effect');\n      peep\n        .getPeep()\n        .then(response => {\n            console.log('promise fulfilled');\n            setPersons(response);\n        })\n  }, []);\n  console.log('render', persons.length, 'notes')\n  \n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumberChange = (event) => {\n      setNewNumber(event.target.value);\n  }\n\n  const handleFilterChange = (event) => {\n      setNewFilter(event.target.value);\n  }\n\n  const del = (name) => {\n    const win = window.confirm(`delete ${name.target.value}?`);\n    console.log(win);\n    console.log(persons.filter(person => person.name === name.target.value)[0].id)\n    axiosDelPeep(persons.filter(person => person.name === name.target.value)[0].id)\n  }\n  \n  const axiosDelPeep = (id) => {\n      peep.deletePeep(id);\n  }\n\n  const addPhonebook = (event) => {\n\n    event.preventDefault()\n\n    // TODO HTTP CREATE, UPDATE\n    let samePeep = false\n    //let peepId;\n    persons.forEach(item => {\n      if (item.name === newName) {\n          //peepId = item.id\n          samePeep = true\n          //console.log('peepID', peepId)\n          console.log('samePeep', samePeep)\n      }\n      });\n\n    if (samePeep === true) {\n      const win = window.confirm(`${newName} is already added to phonebook, replace the odd number with the new one?`);\n      console.log(win);\n      //console.log('peepId', peepId)\n\n      const personName = {\n        name: newName,\n        number: newNumber\n      }\n\n      console.log('personName', personName)\n      console.log('persons', persons.filter(item => item.name === personName.name)[0].id)\n\n      peep\n        .updatePeep(personName, (persons.map(item => item).filter(item => item.name === newName)[0].id))\n        .then(response =>{\n          console.log('response', response)\n          setPersons(persons.map(item => item.name !== newName ? item : item = personName));\n          console.log(persons)\n          setNewName('');  \n          setNewNumber('');\n\n        })\n    }\n    else {\n      const personName = {\n        name: newName,\n        number: newNumber\n      }\n\n      peep\n        .addPeep(personName)\n        .then(response => {\n          console.log(response)\n          setPersons(persons.concat(response));\n        })\n      \n      setMsgAlert(`Added ${newName}`)\n      setTimeout(() => {\n        setMsgAlert(null)\n      }, 5000)\n      setNewName('');  \n      setNewNumber('');\n    \n    }\n  }\n\n  return (\n    <div>\n      <Message msg={msgAlert}/>\n      <h2>Phonebook</h2>\n      <Filter filter={newFilter} toFilterChange={handleFilterChange}/>\n\n      <h2>Add a new</h2>\n      <PersonForm \n        submit={addPhonebook} \n        newName={newName} \n        nameChange={handleNameChange} \n        newNumber = {newNumber}\n        numberChange = {handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <Person persons={[...persons]} newFilter={newFilter} del={del}/>       \n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}